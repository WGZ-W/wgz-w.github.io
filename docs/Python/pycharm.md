# PyCharm è‡ªåŠ¨å¤„ç†ç›¸é‚»æ–‡ä»¶å¤¹åŒ…å¼•ç”¨çš„åŸç†è¯¦è§£

PyCharmå¯ä»¥ç›´æ¥å¼•ç”¨ç›¸é‚»æ–‡ä»¶å¤¹åŒ…çš„åŸå› åœ¨äºå…¶é¡¹ç›®ç»“æ„å’Œå·¥ä½œæ–¹å¼çš„ç‰¹æ®Šæ€§ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š

â€‹â€‹PyCharmé»˜è®¤å°†é¡¹ç›®æ ¹ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„ï¼ˆsys.pathï¼‰â€‹â€‹
å½“ä½ æ‰“å¼€ä¸€ä¸ªé¡¹ç›®æ—¶ï¼ŒPyCharmé€šå¸¸ä¼šå°†é¡¹ç›®æ ¹ç›®å½•ï¼ˆå³åŒ…å«.ideaæ–‡ä»¶å¤¹çš„ç›®å½•ï¼‰æ·»åŠ åˆ°Pythonè§£é‡Šå™¨çš„sys.pathä¸­ã€‚
è¿™ä½¿å¾—é¡¹ç›®å†…çš„ä»»ä½•å­ç›®å½•éƒ½å¯ä»¥ä½œä¸ºé¡¶çº§åŒ…è¢«å¯¼å…¥ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦åŒ…å«__init__.pyæ–‡ä»¶ï¼ˆåœ¨Python 3.3+ä¸­ï¼Œè¿™è¢«ç§°ä¸ºéšå¼å‘½åç©ºé—´åŒ…ï¼‰ã€‚
â€‹â€‹é¡¹ç›®ç»“æ„æ ‡è®°ä¸ºæºä»£ç æ ¹ç›®å½•ï¼ˆSources Rootï¼‰â€‹â€‹
åœ¨PyCharmä¸­ï¼Œä½ å¯ä»¥å°†æŸä¸ªç›®å½•æ ‡è®°ä¸ºâ€œæºä»£ç æ ¹ç›®å½•â€ï¼ˆSources Rootï¼‰ã€‚è¿™æ ·ï¼ŒPyCharmä¼šå°†å…¶æ·»åŠ åˆ°sys.pathä¸­ï¼Œå¹¶ä¸”è¯¥ç›®å½•ä¸‹çš„åŒ…å¯ä»¥ç›´æ¥è¢«å¯¼å…¥ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®æ ¹ç›®å½•æ²¡æœ‰è¢«æ ‡è®°ä¸ºSources Rootï¼Œä½†ä½ å¯ä»¥æ‰‹åŠ¨æ·»åŠ ä»»æ„å¤šä¸ªç›®å½•ã€‚
å¦‚ä½•æ ‡è®°Sources Root:
å³é”®å•å‡»ç›®æ ‡ç›®å½• -> "Mark Directory as" -> "Sources Root"
ç›®å½•ä¼šå˜æˆè“è‰²ï¼ˆé»˜è®¤ä¸»é¢˜ä¸‹ï¼‰ï¼Œè¡¨ç¤ºå…¶ä¸­çš„PythonåŒ…å’Œæ¨¡å—å¯ä»¥è¢«å…¶ä»–éƒ¨åˆ†ç›´æ¥å¯¼å…¥ã€‚
â€‹â€‹ç›¸é‚»æ–‡ä»¶å¤¹å¦‚æœæ²¡æœ‰è¢«æ˜¾å¼æ’é™¤ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå› æ­¤å¯ä»¥è¢«å¯¼å…¥â€‹â€‹
ç¤ºä¾‹é¡¹ç›®ç»“æ„:

my_project/
â”œâ”€â”€ folderA/
â”‚   â”œâ”€â”€ moduleA.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ folderB/
â”‚   â”œâ”€â”€ moduleB.py
â”‚   â””â”€â”€ ...
â””â”€â”€ main.py
åœ¨main.pyä¸­ï¼Œå¯ä»¥ç›´æ¥å¯¼å…¥ï¼š

from folderA import moduleA
from folderB import moduleB
åœ¨moduleA.pyä¸­ä¹Ÿå¯ä»¥å¯¼å…¥moduleBï¼š

from folderB import moduleB
â€‹â€‹æ³¨æ„ï¼šPyCharmæ§åˆ¶å°å’Œè¿è¡Œé…ç½®çš„å·¥ä½œç›®å½•â€‹â€‹
å½“ä½ è¿è¡Œä¸€ä¸ªè„šæœ¬æ—¶ï¼ŒPyCharmé»˜è®¤å°†åŒ…å«è¯¥è„šæœ¬çš„ç›®å½•ä½œä¸ºå·¥ä½œç›®å½•ï¼ˆä¸æ˜¯é¡¹ç›®æ ¹ç›®å½•ï¼‰ã€‚ä½†ç”±äºé¡¹ç›®æ ¹ç›®å½•å·²ç»åœ¨sys.pathä¸­ï¼Œå› æ­¤è¿˜æ˜¯å¯ä»¥æ‰¾åˆ°ç›¸é‚»æ–‡ä»¶å¤¹çš„åŒ…ã€‚
â€‹â€‹ä¸åœ¨å‘½ä»¤è¡Œè¿è¡Œçš„åŒºåˆ«â€‹â€‹
åœ¨å‘½ä»¤è¡Œè¿è¡ŒåŒä¸€ä¸ªç¨‹åºæ—¶ï¼Œéœ€è¦ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•åœ¨sys.pathä¸­ï¼Œå¦åˆ™ä¼šå¯¼å…¥å¤±è´¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶åœ¨PyCharmä¸­å¯ä»¥è¿è¡Œï¼Œè€Œåœ¨å‘½ä»¤è¡Œä¸­å¤±è´¥çš„åŸå› ã€‚
è§£å†³æ–¹æ³•ï¼š
åœ¨å‘½ä»¤è¡Œè¿è¡Œå‰ï¼Œè®¾ç½®PYTHONPATHä¸ºé¡¹ç›®æ ¹ç›®å½•ï¼š
export PYTHONPATH=/path/to/my_project   # Linux/macOS
set PYTHONPATH=C:\path\to\my_project    # Windows
æˆ–è€…ä½¿ç”¨æ¨¡å—è¿è¡Œæ–¹å¼ï¼ˆä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼‰ï¼š
python -m folderA.moduleA
â€‹â€‹PyCharmè‡ªåŠ¨ç”Ÿæˆçš„è¿è¡Œé…ç½®â€‹â€‹
å½“ä½ åœ¨PyCharmä¸­åˆ›å»ºä¸€ä¸ªè¿è¡Œé…ç½®æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è®¾ç½®å·¥ä½œç›®å½•ï¼ˆWorking directoryï¼‰å’Œè·¯å¾„ï¼ˆåŒ…æ‹¬æ ‡è®°ä¸ºSources Rootçš„ç›®å½•ï¼‰ã€‚é€šå¸¸ï¼Œå·¥ä½œç›®å½•è¢«è®¾ç½®ä¸ºé¡¹ç›®æ ¹ç›®å½•ï¼Œè¿™æ ·ä½ å°±èƒ½ç›´æ¥å¯¼å…¥ç›¸é‚»æ–‡ä»¶å¤¹ã€‚
æ€»ç»“ï¼š
PyCharmé€šè¿‡å°†é¡¹ç›®æ ¹ç›®å½•å’Œæ ‡è®°çš„æºç›®å½•æ·»åŠ åˆ°sys.pathä¸­ï¼Œä½¿å¾—åœ¨é¡¹ç›®å†…çš„ä»»æ„ä½ç½®å¯¼å…¥ç›¸é‚»æ–‡ä»¶å¤¹çš„åŒ…å˜å¾—å®¹æ˜“ã€‚è¿™å¤§å¤§æ–¹ä¾¿äº†å¼€å‘ï¼Œä½†åœ¨éƒ¨ç½²æˆ–å‘½ä»¤è¡Œè¿è¡Œæ—¶ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„è·¯å¾„è®¾ç½®ã€‚



PyCharm è‡ªåŠ¨å¤„ç†ç›¸é‚»æ–‡ä»¶å¤¹åŒ…å¼•ç”¨çš„åŸç†è¯¦è§£

PyCharm èƒ½å¤Ÿç›´æ¥å¼•ç”¨ç›¸é‚»æ–‡ä»¶å¤¹ä¸­çš„åŒ…è€Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ sys.pathï¼Œè¿™å½’åŠŸäºå…¶ç‹¬ç‰¹çš„é¡¹ç›®ç»“æ„å’Œæ™ºèƒ½é…ç½®æœºåˆ¶ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢ç©¶å…¶ä¸­çš„åŸç†ï¼š

æ ¸å¿ƒæœºåˆ¶ï¼šé¡¹ç›®æ ¹ç›®å½•ä¸æºä»£ç æ ¹ç›®å½•
é¡¹ç›®æ ¹ç›®å½•è‡ªåŠ¨åŠ å…¥ç³»ç»Ÿè·¯å¾„

PyCharm åœ¨å¯åŠ¨æ—¶ä¼šå°†æ•´ä¸ªé¡¹ç›®æ ¹ç›®å½•è‡ªåŠ¨æ·»åŠ åˆ° Python è§£é‡Šå™¨çš„ sys.path ä¸­ï¼š
åœ¨ PyCharm ä¸­è¿è¡Œç¨‹åºæ—¶æŸ¥çœ‹è·¯å¾„

import sys
print(sys.path)  # ä½ ä¼šçœ‹åˆ°é¡¹ç›®æ ¹ç›®å½•å·²ç»åœ¨åˆ—è¡¨ä¸­

æºä»£ç æ ¹ç›®å½• (Sources Root)

è¿™æ˜¯ PyCharm ç‰¹æœ‰çš„æ¦‚å¿µï¼š
å³é”®å•å‡»æ–‡ä»¶å¤¹ â†’ "Mark Directory as" â†’ "Sources Root"

æ ‡è®°åä¼šå˜æˆè“è‰²æ–‡ä»¶å¤¹å›¾æ ‡

è¿™äº›æ–‡ä»¶å¤¹ä¼šè¢« PyCharm ä¼˜å…ˆåŠ å…¥å¯¼å…¥è·¯å¾„

!https://www.jetbrains.com/help/pycharm/img/sources_root.png

PyCharm è‡ªåŠ¨å¤„ç†å¯¼å…¥çš„ 4 å¤§æŠ€æœ¯æ”¯æ’‘
è™šæ‹Ÿç¯å¢ƒæ™ºèƒ½æ„ŸçŸ¥

PyCharm åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¼šè‡ªåŠ¨åŒ…å«ï¼š
æŸ¥çœ‹ PyCharm åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒæ¿€æ´»è„šæœ¬

åœ¨ activate è„šæœ¬ä¸­ä½ ä¼šå‘ç°ç±»ä¼¼å†…å®¹ï¼š

export PYTHONPATH="/path/to/your/project:$PYTHONPATH"

è¿è¡Œé…ç½®è‡ªåŠ¨ç”Ÿæˆ

å½“ä½ åœ¨ PyCharm ä¸­åˆ›å»ºè¿è¡Œé…ç½®æ—¶ï¼š
è‡ªåŠ¨è®¾ç½®å·¥ä½œç›®å½•ä¸ºé¡¹ç›®æ ¹ç›®å½•

è‡ªåŠ¨æ·»åŠ æºä»£ç æ ¹ç›®å½•åˆ° Python è·¯å¾„

ç”ŸæˆåŒ…å«è·¯å¾„è®¾ç½®çš„ä¸´æ—¶è¿è¡Œè„šæœ¬

ç´¢å¼•ä¸é™æ€åˆ†æ

PyCharm çš„ä»£ç å¼•æ“ä¼šï¼š
æ‰«ææ•´ä¸ªé¡¹ç›®ç»“æ„

æ„å»ºè·¨æ¨¡å—çš„å¼•ç”¨å…³ç³»å›¾

å³ä½¿è·¯å¾„æœªè®¾ç½®ï¼Œä¹Ÿèƒ½æä¾›ä»£ç è¡¥å…¨å’Œå¯¼èˆª

éšå¼å‘½åç©ºé—´åŒ… (PEP 420)

å¯¹äº Python 3.3+ï¼š
å³ä½¿ç›¸é‚»æ–‡ä»¶å¤¹æ²¡æœ‰ __init__.py

PyCharm ä»èƒ½è¯†åˆ«ä¸ºæœ‰æ•ˆçš„å‘½åç©ºé—´åŒ…

æ”¯æŒç›´æ¥å¯¼å…¥å…¶ä¸­çš„æ¨¡å—

å¯¹æ¯”å®éªŒï¼šPyCharm vs å‘½ä»¤è¡Œ
æƒ…å†µ PyCharm è¡Œä¸º å‘½ä»¤è¡Œè¡Œä¸º

ç›¸é‚»æ–‡ä»¶å¤¹å¯¼å…¥ âœ… ç›´æ¥æˆåŠŸ âŒ éœ€è¦æ‰‹åŠ¨è®¾ç½®è·¯å¾„
æºä»£ç æ ¹ç›®å½• â­ï¸ ä¼˜å…ˆè¯†åˆ« âœ–ï¸ æ— æ­¤æ¦‚å¿µ
ç›¸å¯¹å¯¼å…¥ âœ… æ™ºèƒ½å¤„ç† âš ï¸ éœ€ç”¨ -m å‚æ•°
ä»£ç æç¤º ğŸš€ å®æ—¶å¯ç”¨ âœ–ï¸ æ— æç¤º

ä¸ºä»€ä¹ˆå‘½ä»¤è¡Œè¿è¡Œéœ€è¦é¢å¤–è®¾ç½®ï¼Ÿ

å½“ä½ åœ¨ç»ˆç«¯ç›´æ¥è¿è¡Œè„šæœ¬æ—¶ï¼š
python main_folder/main_script.py

è§£é‡Šå™¨ä¼šï¼š
åªå°†åŒ…å«è„šæœ¬çš„ç›®å½• (main_folder) åŠ å…¥ sys.path

æ— æ³•è‡ªåŠ¨è¯†åˆ«ä¸Šå±‚ç›®å½•ä¸­çš„å…¶ä»–æ–‡ä»¶å¤¹

è€Œ PyCharm è¿è¡Œæ—¶ç­‰æ•ˆäºï¼š
PyCharm å®é™…æ‰§è¡Œçš„å‘½ä»¤ï¼š

python -m main_folder.main_script --working-dir=/project_root

æœ€ä½³å®è·µæŒ‡å—

é¡¹ç›®è®¾ç½®å»ºè®®
æ˜¾å¼æ ‡è®° Sources Root

      project_root/
   â”œâ”€â”€ src/            # æ ‡è®°ä¸º Sources Root (è“è‰²)
â”œâ”€â”€ utils/

â””â”€â”€ services/

   â”œâ”€â”€ tests/          # æ ‡è®°ä¸º Tests Root (ç»¿è‰²)
   â””â”€â”€ data/           # æ ‡è®°ä¸º Resources Root (ç´«è‰²)
   
ä¿æŒé¡¹ç›®æ ¹ç›®å½•æ¸…æ™°

ä¸è¦å°†æ¨¡å—ç›´æ¥æ”¾åœ¨æ ¹ç›®å½•

ä½¿ç”¨ src ä½œä¸ºä¸»åŒ…å®¹å™¨

ä¿è¯å¯ç§»æ¤æ€§çš„æŠ€å·§
å³ä½¿ä½¿ç”¨ PyCharm å¼€å‘ï¼Œä¹Ÿè¦å…¼å®¹å…¶ä»–ç¯å¢ƒï¼š

æ·»åŠ å…¼å®¹æ€§ä»£ç 

try:
    # PyCharm ä¸­è‡ªåŠ¨å¯ç”¨çš„å¯¼å…¥
    from adjacent_folder import module
except ImportError:
    # å‘½ä»¤è¡Œè¿è¡Œçš„å¤‡ç”¨æ–¹æ¡ˆ
    import sys
    from pathlib import Path
    sys.path.append(str(Path(__file__).parent.parent))
    from adjacent_folder import module

PyCharm è·¯å¾„è®¾ç½®çš„æ·±åº¦é…ç½®

å¦‚éœ€è‡ªå®šä¹‰ï¼š
File â†’ Settings â†’ Build, Execution, Deployment â†’ Python Debugger

â˜‘ï¸ Add source roots to PYTHONPATH

â˜‘ï¸ Add contents root to PYTHONPATH

!https://resources.jetbrains.com/help/img/idea/2021.3/py_debugger_python.png

æ€»ç»“ï¼šPyCharm çš„æ™ºèƒ½è·¯å¾„ç®¡ç†

PyCharm é€šè¿‡æ•´åˆä»¥ä¸‹æŠ€æœ¯å®ç°æ— ç¼å¯¼å…¥ï¼š
é¡¹ç›®æ ¹ç›®å½•è‡ªåŠ¨åŠ å…¥è·¯å¾„

æºä»£ç æ ¹ç›®å½•ç‰¹æ®Šå¤„ç†

è™šæ‹Ÿç¯å¢ƒè·¯å¾„é¢„é…ç½®

åŸºäºé™æ€åˆ†æçš„æ™ºèƒ½æç¤º

PEP 420 å‘½åç©ºé—´åŒ…æ”¯æŒ

è¿™ç§è®¾è®¡å¤§å¤§ç®€åŒ–äº†å¼€å‘ç¯å¢ƒé…ç½®ï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä»£ç æœ¬èº«è€Œéè·¯å¾„é—®é¢˜ï¼Œä½†ç†è§£å…¶èƒŒåçš„æœºåˆ¶èƒ½å¸®åŠ©å¼€å‘è€…å†™å‡ºæ›´å¥å£®ã€å¯ç§»æ¤çš„ Python é¡¹ç›®ã€‚



ä¸ºä»€ä¹ˆ sys.path æ— æ³•è¯†åˆ« ~ åŠå…¶è§£å†³æ–¹æ¡ˆ

é—®é¢˜æœ¬è´¨ï¼šPython å¯¹ ~ çš„å¤„ç†æ–¹å¼

åœ¨ Python ä¸­ï¼Œå½“æ‚¨å°è¯•åœ¨ sys.path ä¸­ä½¿ç”¨ ~ï¼ˆæ³¢æµªå·ï¼‰è¡¨ç¤ºç”¨æˆ·ä¸»ç›®å½•æ—¶ï¼Œä¼šé‡åˆ°è·¯å¾„æ— æ³•è¯†åˆ«çš„é—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºï¼š
æ³¢æµªå·ä¸æ˜¯é€šç”¨è·¯å¾„æ ‡è¯†ç¬¦ï¼š

~ æ˜¯ shellï¼ˆå¦‚ Bash, Zshï¼‰çš„æ‰©å±•ç‰¹æ€§ï¼Œä¸æ˜¯æ–‡ä»¶ç³»ç»Ÿæœ¬èº«çš„ä¸€éƒ¨åˆ†

Python çš„ sys æ¨¡å—ä¸ä¼šè‡ªåŠ¨å±•å¼€ ~ åˆ°å®é™…è·¯å¾„
sys.path éœ€è¦ç»å¯¹è·¯å¾„ï¼š

      # é”™è¯¯çš„ç”¨æ³•
   sys.path.append('~/my_packages')
   
   # å®é™…è¢«è§£æä¸ºï¼š
   print(sys.path[-1])  # è¾“å‡º '~/my_packages' (ä¸æ˜¯æœ‰æ•ˆçš„ç»å¯¹è·¯å¾„)
   
æ“ä½œç³»ç»Ÿå·®å¼‚ï¼š

Linux/macOS: /home/username

Windows: C:\Users\username

   Python éœ€è¦ç»Ÿä¸€çš„æ–¹æ³•å¤„ç†æ‰€æœ‰å¹³å°

è§£å†³æ–¹æ¡ˆï¼šæ­£ç¡®å¤„ç†ç”¨æˆ·ä¸»ç›®å½•è·¯å¾„
ä½¿ç”¨ os.path.expanduser() (æ¨è)

è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ï¼š

import sys
import os

å±•å¼€æ³¢æµªå·åˆ°å®Œæ•´è·¯å¾„

home_path = os.path.expanduser('~')

æ·»åŠ è‡ªå®šä¹‰åŒ…ç›®å½•

custom_path = os.path.join(home_path, 'my_python_packages')
sys.path.append(custom_path)

print(f"Added: {custom_path}")  # /Users/username/my_python_packages

ä½¿ç”¨ pathlib åº“ï¼ˆPython 3.4+ï¼‰

æ›´ç°ä»£çš„å¯¹è±¡å¯¼å‘æ–¹å¼ï¼š

from pathlib import Path
import sys

è·å–ç”¨æˆ·ä¸»ç›®å½•

home_dir = Path.home()

æ„å»ºè·¯å¾„å¹¶æ·»åŠ 

package_path = home_dir / 'projects' / 'my_packages'
sys.path.append(str(package_path))

print(f"Added: {package_path}")

ç¯å¢ƒå˜é‡æ›¿ä»£æ–¹æ¡ˆ

é€šè¿‡ç¯å¢ƒå˜é‡è·å–è·¯å¾„ï¼š

import sys
import os

ä»ç¯å¢ƒå˜é‡è·å–

user_home = os.environ.get('HOME') or os.environ.get('USERPROFILE')

if user_home:
    package_dir = os.path.join(user_home, 'custom_modules')
    sys.path.append(package_dir)
else:
    print("æ— æ³•ç¡®å®šç”¨æˆ·ä¸»ç›®å½•")

ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•æ›´å¯é ï¼Ÿ
æ–¹æ³• ä¼˜ç‚¹ é€‚ç”¨åœºæ™¯

os.path.expanduser() è·¨å¹³å°å…¼å®¹ï¼Œå†…ç½®äºæ ‡å‡†åº“ å¤§å¤šæ•°Pythonåº”ç”¨
pathlib.Path.home() é¢å‘å¯¹è±¡ï¼Œç°ä»£API Python 3.4+é¡¹ç›®
ç¯å¢ƒå˜é‡ çµæ´»æ§åˆ¶ éœ€è¦è‡ªå®šä¹‰é…ç½®çš„åœºæ™¯

é«˜çº§æŠ€å·§ï¼šå¤„ç†è¾¹ç¼˜æƒ…å†µ
Windows ç‰¹æ®Šå¤„ç†

Windows ä¸Šæœ‰å¤šç§æ–¹æ³•è¡¨ç¤ºç”¨æˆ·ç›®å½•ï¼š

import os

å…¼å®¹æ€§æ›´å¥½çš„Windowså¤„ç†

if os.name == 'nt':
    home = os.environ.get('USERPROFILE') or os.environ.get('HOMEDRIVE') + os.environ.get('HOMEPATH')
else:
    home = os.path.expanduser('~')

éªŒè¯è·¯å¾„å­˜åœ¨æ€§

åœ¨æ·»åŠ åˆ° sys.path å‰éªŒè¯ï¼š

from pathlib import Path

def add_path_if_exists(path):
    path_obj = Path(os.path.expanduser(path))
    if path_obj.exists() and path_obj.is_dir():
        sys.path.append(str(path_obj))
    else:
        print(f"è­¦å‘Šï¼šè·¯å¾„ä¸å­˜åœ¨ {path_obj}")

add_path_if_exists('~/non_existent_folder')  # ä¼šè¾“å‡ºè­¦å‘Š

å¤„ç†è·¯å¾„ä¸­çš„ç‰¹æ®Šç¬¦å·

å¦‚æœè·¯å¾„åŒ…å«ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦ï¼š

import sys
import urllib.parse

path = '~/Documents/My Projects/Python #1'
expanded = os.path.expanduser(path)

URLç¼–ç ç‰¹æ®Šå­—ç¬¦

safe_path = urllib.parse.quote(expanded, safe='/')
sys.path.append(safe_path)

ä¸ºä»€ä¹ˆPyCharmå¯ä»¥å¤„ç†~ï¼Ÿ

åœ¨PyCharmä¸­ç›´æ¥ä½¿ç”¨~æœ‰æ•ˆæ˜¯å› ä¸ºï¼š
æ™ºèƒ½è·¯å¾„è§£æï¼š

PyCharmçš„è¿è¡Œæ—¶ç¯å¢ƒä¼šè‡ªåŠ¨å±•å¼€~

IDEåœ¨åå°å¤„ç†äº†è·¯å¾„è½¬æ¢
é¡¹ç›®é…ç½®ï¼š

      graph LR
     A[PyCharmè®¾ç½®] --> B[è¿è¡Œé…ç½®]
--> C[PYTHONPATH]

--> D[è‡ªåŠ¨å±•å¼€~]

   
è·¯å¾„æ˜ å°„æœºåˆ¶ï¼š

   PyCharmä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„å¤„ç†é€»è¾‘ï¼š
      // PyCharmçš„å†…éƒ¨å¤„ç†é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰
   String expandedPath = expandTilde(path);
   addToPythonPath(expandedPath);
   

æœ€ä½³å®è·µå»ºè®®
æ°¸è¿œä¸è¦ç›´æ¥ä½¿ç”¨~ï¼š

      # é”™è¯¯å†™æ³•
   sys.path.append('~/my_packages')
   
   # æ­£ç¡®å†™æ³•
   sys.path.append(os.path.expanduser('~/my_packages'))
   
åœ¨è·¨å¹³å°ä»£ç ä¸­ä½¿ç”¨Path.home()ï¼š

      from pathlib import Path
   sys.path.append(str(Path.home() / 'global_packages'))
   
å¯¹äºé‡è¦é¡¹ç›®ï¼š

ä½¿ç”¨æ ‡å‡†åŒ–çš„è·¯å¾„é…ç½®ç³»ç»Ÿ

è€ƒè™‘ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶æŒ‡å®šè·¯å¾„

åœ¨æ–‡æ¡£ä¸­æ˜ç¡®è·¯å¾„è¦æ±‚
è°ƒè¯•æŠ€å·§ï¼š

      # æ‰“å°å½“å‰sys.path
   import sys, pprint
   pprint.pprint(sys.path)
   
   # æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
   print(os.path.exists('~/my_packages'))  # False
   print(os.path.exists(os.path.expanduser('~/my_packages')))  # True
   

é€šè¿‡ç†è§£è¿™äº›åŸç†å’Œæ­£ç¡®ä½¿ç”¨è·¯å¾„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿æ‚¨çš„Pythonä»£ç åœ¨ä¸åŒç¯å¢ƒå’Œå¹³å°ä¸Šéƒ½èƒ½æ­£ç¡®å¤„ç†ç”¨æˆ·ä¸»ç›®å½•è·¯å¾„ã€‚